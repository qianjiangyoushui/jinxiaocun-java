<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Bills">
	
	<!-- 缓存条数 -->
	<cache size="2000" />
	
	<!-- 条件语句 -->
	<sql id="WhereSQL">
		<where>
			<if test="guid != null and guid != ''"> 
			AND T.GUID = #{guid} 
			</if>
			<if test="createdate != null and createdate != ''"> 
			AND T.CREATEDATE = #{createdate} 
			</if>
			<if test="billcode != null and billcode != ''"> 
			AND T.BILLCODE = #{billcode} 
			</if>
			<if test="type != null and type != ''"> 
			AND T.TYPE = #{type} 
			</if>
			<if test="amount != null and amount != ''"> 
			AND T.AMOUNT = #{amount} 
			</if>
			<if test="maturitydate != null and maturitydate != ''"> 
			AND T.MATURITYDATE = #{maturitydate} 
			</if>
			<if test="rkcounterparty != null and rkcounterparty != ''"> 
			AND T.RKCOUNTERPARTY = #{rkcounterparty} 
			</if>
			<if test="rktype != null and rktype != ''"> 
			AND T.RKTYPE = #{rktype} 
			</if>
			<if test="rkdate != null and rkdate != ''"> 
			AND T.RKDATE = #{rkdate} 
			</if>
			<if test="rkdescription != null and rkdescription != ''"> 
			AND T.RKDESCRIPTION = #{rkdescription} 
			</if>
			<if test="cktype != null and cktype != ''"> 
			AND T.CKTYPE = #{cktype} 
			</if>
			<if test="ckdate != null and ckdate != ''"> 
			AND T.CKDATE = #{ckdate} 
			</if>
			<if test="ckcounterparty != null and ckcounterparty != ''"> 
			AND T.CKCOUNTERPARTY = #{ckcounterparty} 
			</if>
			<if test="ckdescription != null and ckdescription != ''"> 
			AND T.CKDESCRIPTION = #{ckdescription} 
			</if>
			<if test="operatorid != null and operatorid != ''"> 
			AND T.OPERATORID = #{operatorid} 
			</if>
			<if test="lastupdatetime != null and lastupdatetime != ''"> 
			AND T.LASTUPDATETIME = #{lastupdatetime} 
			</if>
			<if test="companyid != null and companyid != ''"> 
			AND T.COMPANYID = #{companyid} 
			</if>
			<if test="status != null and status != ''"> 
			AND T.STATUS = #{status} 
			</if>
			
			<if test="backmoneyid != null and backmoneyid != ''"> 
			AND T.backmoneyid = #{backmoneyid} 
			</if>
		</where>
	</sql>
	
	<!-- 查找语句 -->
	<select id="find" resultType="Bills" parameterType="Bills" flushCache="false" useCache="true">
    	SELECT 
	    	T.GUID AS guid, 
	    	T.CREATEDATE AS createdate, 
	    	T.BILLCODE AS billcode, 
	    	T.TYPE AS type, 
	    	T.AMOUNT AS amount, 
	    	T.MATURITYDATE AS maturitydate, 
	    	T.RKCOUNTERPARTY AS rkcounterparty, 
	    	T.RKTYPE AS rktype, 
	    	T.RKDATE AS rkdate, 
	    	T.RKDESCRIPTION AS rkdescription, 
	    	T.CKTYPE AS cktype, 
	    	T.CKDATE AS ckdate, 
	    	T.CKCOUNTERPARTY AS ckcounterparty, 
	    	T.CKDESCRIPTION AS ckdescription, 
	    	T.OPERATORID AS operatorid, 
	    	T.LASTUPDATETIME AS lastupdatetime, 
	    	T.COMPANYID AS companyid, 
	    	T.STATUS AS status ,
	    	T.backmoneyid as backmoneyid 
    	FROM bills T
		<include refid="WhereSQL" />
		ORDER BY T.status,T.maturitydate
	</select>
	
	<!-- 获取金额录数语句 -->
	<select id="countAmount" resultType="java.math.BigDecimal" parameterType="Bills" flushCache="false" useCache="true">
    	SELECT ifnull(sum(amount),0)  FROM bills T  
		<include refid="WhereSQL" />
	</select>
	
	<!-- 获取总记录数语句 -->
	<select id="findCount" resultType="java.lang.Integer" parameterType="Bills" flushCache="false" useCache="true">
    	SELECT COUNT(*)  FROM bills T
		<include refid="WhereSQL" />
	</select>
	
	<!-- 插入语句 -->
	<insert id="insert" parameterType="Bills" flushCache="true"> 
		INSERT INTO bills
		(
			GUID, 
			CREATEDATE, 
			BILLCODE, 
			TYPE, 
			AMOUNT, 
			MATURITYDATE, 
			RKCOUNTERPARTY, 
			RKTYPE, 
			RKDATE, 
			RKDESCRIPTION, 
			CKTYPE, 
			CKDATE, 
			CKCOUNTERPARTY, 
			CKDESCRIPTION, 
			OPERATORID, 
			LASTUPDATETIME, 
			COMPANYID, 
			STATUS ,
			backmoneyid 
		 ) 
		VALUES
		(
			#{guid,jdbcType=VARCHAR}, 
			#{createdate,jdbcType=TIMESTAMP}, 
			#{billcode,jdbcType=VARCHAR}, 
			#{type,jdbcType=VARCHAR}, 
			#{amount,jdbcType=DECIMAL}, 
			#{maturitydate,jdbcType=TIMESTAMP}, 
			#{rkcounterparty,jdbcType=VARCHAR}, 
			#{rktype,jdbcType=VARCHAR}, 
			#{rkdate,jdbcType=TIMESTAMP}, 
			#{rkdescription,jdbcType=VARCHAR}, 
			#{cktype,jdbcType=VARCHAR}, 
			#{ckdate,jdbcType=TIMESTAMP}, 
			#{ckcounterparty,jdbcType=VARCHAR}, 
			#{ckdescription,jdbcType=VARCHAR}, 
			#{operatorid,jdbcType=VARCHAR}, 
			#{lastupdatetime,jdbcType=TIMESTAMP}, 
			#{companyid,jdbcType=VARCHAR}, 
			#{status,jdbcType=VARCHAR},
			#{backmoneyid,jdbcType=VARCHAR}  
		) 
	</insert>
	
	<!-- 更新语句 -->
	<update id="update"  parameterType="Bills" flushCache="true"> 
		update bills 
		<set> 
			<if test="guid != null">GUID=#{guid},</if>
			<if test="createdate != null">CREATEDATE=#{createdate},</if>
			<if test="billcode != null">BILLCODE=#{billcode},</if>
			<if test="type != null">TYPE=#{type},</if>
			<if test="amount != null">AMOUNT=#{amount},</if>
			<if test="maturitydate != null">MATURITYDATE=#{maturitydate},</if>
			<if test="rkcounterparty != null">RKCOUNTERPARTY=#{rkcounterparty},</if>
			<if test="rktype != null">RKTYPE=#{rktype},</if>
			<if test="rkdate != null">RKDATE=#{rkdate},</if>
			<if test="rkdescription != null">RKDESCRIPTION=#{rkdescription},</if>
			<if test="cktype != null">CKTYPE=#{cktype},</if>
			<if test="ckdate != null">CKDATE=#{ckdate},</if>
			<if test="ckcounterparty != null">CKCOUNTERPARTY=#{ckcounterparty},</if>
			<if test="ckdescription != null">CKDESCRIPTION=#{ckdescription},</if>
			<if test="operatorid != null">OPERATORID=#{operatorid},</if>
			<if test="lastupdatetime != null">LASTUPDATETIME=#{lastupdatetime},</if>
			<if test="companyid != null">COMPANYID=#{companyid},</if>
			<if test="status != null">STATUS=#{status},</if>
			<if test="backmoneyid != null">backmoneyid=#{backmoneyid},</if>
		</set>
		WHERE GUID = #{guid}
	</update> 
	
	<!-- 单选删除语句 -->
	<delete id="delete" parameterType="Bills" flushCache="true"> 
		DELETE FROM bills WHERE GUID = #{guid}
	</delete>
	
	<!-- 多选删除 -->
	<delete id="mulDel" parameterType="java.lang.String" flushCache="true">
		DELETE FROM bills WHERE GUID IN
		<foreach item="id" collection="array" open="(" separator="," close=")"> 
			#{id}
		</foreach> 
	</delete>
</mapper>
