<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Category">
	
	<!-- 缓存条数 -->
	<cache size="2000" />
	
	<!-- 条件语句 -->
	<sql id="WhereSQL">
		<where>
			<if test="guid != null and guid != ''"> 
			AND T.GUID = #{guid} 
			</if>
			<if test="categorname != null and categorname != ''"> 
			AND T.CATEGORNAME = #{categorname} 
			</if>
			<if test="cateid != null and cateid != ''"> 
			AND T.CATEID = #{cateid} 
			</if>
			<if test="belongsid != null and belongsid != ''"> 
			AND T.BELONGSID = #{belongsid} 
			</if>
			<if test="belongsname != null and belongsname != ''"> 
			AND T.BELONGSNAME = #{belongsname} 
			</if>
			<if test="sort != null and sort != ''"> 
			AND T.SORT = #{sort} 
			</if>
			<if test="keyvalue != null and keyvalue != ''"> 
			AND T.KEYVALUE = #{keyvalue} 
			</if>
		</where>
	</sql>
	
	<!-- 查找语句 -->
	<select id="find" resultType="Category" parameterType="Category" flushCache="false" useCache="true">
    	SELECT 
	    	T.GUID AS guid, 
	    	T.CATEGORNAME AS categorname, 
	    	T.CATEID AS cateid, 
	    	T.BELONGSID AS belongsid, 
	    	T.BELONGSNAME AS belongsname, 
	    	T.SORT AS sort, 
	    	T.KEYVALUE AS keyvalue 
    	FROM category T
		<include refid="WhereSQL" />
		ORDER BY T.SORT
	</select>
	
	<!-- 获取总记录数语句 -->
	<select id="findCount" resultType="java.lang.Integer" parameterType="Category" flushCache="false" useCache="true">
    	SELECT COUNT(*)  FROM category T
		<include refid="WhereSQL" />
	</select>
	
	<!-- 插入语句 -->
	<insert id="insert" parameterType="Category" flushCache="true"> 
		INSERT INTO category
		(
			GUID, 
			CATEGORNAME, 
			CATEID, 
			BELONGSID, 
			BELONGSNAME, 
			SORT, 
			KEYVALUE 
		 ) 
		VALUES
		(
			#{guid,jdbcType=VARCHAR}, 
			#{categorname,jdbcType=VARCHAR}, 
			#{cateid,jdbcType=VARCHAR}, 
			#{belongsid,jdbcType=VARCHAR}, 
			#{belongsname,jdbcType=VARCHAR}, 
			#{sort,jdbcType=VARCHAR}, 
			#{keyvalue,jdbcType=VARCHAR} 
		) 
	</insert>
	
	<!-- 更新语句 -->
	<update id="update"  parameterType="Category" flushCache="true"> 
		update category 
		<set> 
			<if test="guid != null">GUID=#{guid},</if>
			<if test="categorname != null">CATEGORNAME=#{categorname},</if>
			<if test="cateid != null">CATEID=#{cateid},</if>
			<if test="belongsid != null">BELONGSID=#{belongsid},</if>
			<if test="belongsname != null">BELONGSNAME=#{belongsname},</if>
			<if test="sort != null">SORT=#{sort},</if>
			<if test="keyvalue != null">KEYVALUE=#{keyvalue},</if>
		</set>
		WHERE GUID = #{guid}
	</update> 
	
	<!-- 单选删除语句 -->
	<delete id="delete" parameterType="Category" flushCache="true"> 
		DELETE FROM category WHERE GUID = #{guid}
	</delete>
	
	<!-- 多选删除 -->
	<delete id="mulDel" parameterType="java.lang.String" flushCache="true">
		DELETE FROM category WHERE GUID IN
		<foreach item="id" collection="array" open="(" separator="," close=")"> 
			#{id}
		</foreach> 
	</delete>
</mapper>
