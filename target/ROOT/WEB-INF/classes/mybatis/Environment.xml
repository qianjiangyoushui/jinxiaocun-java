<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Environment">
	
	<!-- 缓存条数 -->
	<cache size="2000" />
	
	<!-- 条件语句 -->
	<sql id="WhereSQL">
		<where>
			<if test="guid != null and guid != ''"> 
			AND T.GUID = #{guid} 
			</if>
			<if test="depotid != null and depotid != ''"> 
			AND T.DEPOTID = #{depotid} 
			</if>
			<if test="recorddate != null and recorddate != ''"> 
			AND T.RECORDDATE = #{recorddate} 
			</if>
			<if test="temperature != null and temperature != ''"> 
			AND T.TEMPERATURE = #{temperature} 
			</if>
			<if test="humidity != null and humidity != ''"> 
			AND T.HUMIDITY = #{humidity} 
			</if>
			<if test="operatorid != null and operatorid != ''"> 
			AND T.OPERATORID = #{operatorid} 
			</if>
			<if test="createdate != null and createdate != ''"> 
			AND T.CREATEDATE = #{createdate} 
			</if>
		</where>
	</sql>
	
	
	<!-- 查找语句 -->
	<select id="findmonthList" resultType="Environment" parameterType="Environment" flushCache="false" useCache="true">
    	SELECT 
	    	T.GUID AS guid, 
	    	T.DEPOTID AS depotid, 
	    	T.RECORDDATE AS recorddate, 
	    	T.TEMPERATURE AS temperature, 
	    	T.HUMIDITY AS humidity, 
	    	T.OPERATORID AS operatorid, 
	    	T.CREATEDATE AS createdate 
    	FROM environment T where 
			<if test="depotid != null and depotid != ''"> 
				 T.DEPOTID = #{depotid} 
			</if>
			<if test="startdate != null and startdate != ''"> 
				AND  T.RECORDDATE &gt;=#{startdate}
			</if>
			<if test="enddate != null and enddate != ''"> 
				AND T.RECORDDATE &lt;=#{enddate} 
			</if>
	</select>
	<!-- 查找语句 -->
	<select id="find" resultType="Environment" parameterType="Environment" flushCache="false" useCache="true">
    	SELECT 
	    	T.GUID AS guid, 
	    	T.DEPOTID AS depotid, 
	    	T.RECORDDATE AS recorddate, 
	    	T.TEMPERATURE AS temperature, 
	    	T.HUMIDITY AS humidity, 
	    	T.OPERATORID AS operatorid, 
	    	T.CREATEDATE AS createdate 
    	FROM environment T
		<include refid="WhereSQL" />
	</select>
	
	<!-- 获取总记录数语句 -->
	<select id="findCount" resultType="java.lang.Integer" parameterType="Environment" flushCache="false" useCache="true">
    	SELECT COUNT(*)  FROM environment T
		<include refid="WhereSQL" />
	</select>
	
	<!-- 插入语句 -->
	<insert id="insert" parameterType="Environment" flushCache="true"> 
		INSERT INTO environment
		(
			GUID, 
			DEPOTID, 
			RECORDDATE, 
			TEMPERATURE, 
			HUMIDITY, 
			OPERATORID, 
			CREATEDATE 
		 ) 
		VALUES
		(
			#{guid,jdbcType=VARCHAR}, 
			#{depotid,jdbcType=VARCHAR}, 
			#{recorddate,jdbcType=DATE}, 
			#{temperature,jdbcType=DECIMAL}, 
			#{humidity,jdbcType=DECIMAL}, 
			#{operatorid,jdbcType=VARCHAR}, 
			#{createdate,jdbcType=DATE} 
		) 
	</insert>
	
	<!-- 更新语句 -->
	<update id="update"  parameterType="Environment" flushCache="true"> 
		update environment 
		<set> 
			<if test="guid != null">GUID=#{guid},</if>
			<if test="depotid != null">DEPOTID=#{depotid},</if>
			<if test="recorddate != null">RECORDDATE=#{recorddate},</if>
			<if test="temperature != null">TEMPERATURE=#{temperature},</if>
			<if test="humidity != null">HUMIDITY=#{humidity},</if>
			<if test="operatorid != null">OPERATORID=#{operatorid},</if>
			<if test="createdate != null">CREATEDATE=#{createdate},</if>
		</set>
		WHERE GUID = #{guid}
	</update> 
	
	<!-- 单选删除语句 -->
	<delete id="delete" parameterType="Environment" flushCache="true"> 
		DELETE FROM environment WHERE GUID = #{guid}
	</delete>
	
	<!-- 多选删除 -->
	<delete id="mulDel" parameterType="java.lang.String" flushCache="true">
		DELETE FROM environment WHERE GUID IN
		<foreach item="id" collection="array" open="(" separator="," close=")"> 
			#{id}
		</foreach> 
	</delete>
</mapper>
