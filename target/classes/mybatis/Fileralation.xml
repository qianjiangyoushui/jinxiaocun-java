<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Fileralation">

    <!-- 缓存条数 -->
    <cache size="2000" />

    <!-- 条件语句 -->
    <sql id="WhereSQL">
        <where>
            <if test="guid != null and guid != ''">
                AND T.GUID = #{guid}
            </if>
            <if test="fileid != null and fileid != ''">
                AND T.FILEID = #{fileid}
            </if>
            <if test="ralationid != null and ralationid != ''">
                AND T.RALATIONID = #{ralationid}
            </if>
            <if test="batchcode != null and batchcode != ''">
                AND T.BATCHCODE = #{batchcode}
            </if>
            <if test="remark != null and remark != ''">
                AND T.REMARK = #{remark}
            </if>
        </where>
    </sql>

    <!-- 查找语句 -->
    <select id="find" resultType="Fileralation" parameterType="Fileralation" flushCache="false" useCache="true">
        SELECT
        T.GUID AS guid,
        T.FILEID AS fileid,
        T.RALATIONID AS ralationid,
        T.BATCHCODE AS batchcode,
        T.REMARK AS remark
        FROM fileralation T
        <include refid="WhereSQL" />
    </select>

    <!-- 获取总记录数语句 -->
    <select id="findCount" resultType="java.lang.Integer" parameterType="Fileralation" flushCache="false" useCache="true">
        SELECT COUNT(*)  FROM fileralation T
        <include refid="WhereSQL" />
    </select>

    <!-- 插入语句 -->
    <insert id="insert" parameterType="Fileralation" flushCache="true">
        INSERT INTO fileralation
        (
        GUID,
        FILEID,
        RALATIONID,
        BATCHCODE,
        REMARK
        )
        VALUES
        (
        #{guid,jdbcType=VARCHAR},
        #{fileid,jdbcType=VARCHAR},
        #{ralationid,jdbcType=VARCHAR},
        #{batchcode,jdbcType=VARCHAR},
        #{remark,jdbcType=VARCHAR}
        )
    </insert>

    <!-- 更新语句 -->
    <update id="update"  parameterType="Fileralation" flushCache="true">
        update fileralation
        <set>
            <if test="guid != null">GUID=#{guid},</if>
            <if test="fileid != null">FILEID=#{fileid},</if>
            <if test="ralationid != null">RALATIONID=#{ralationid},</if>
            <if test="batchcode != null">BATCHCODE=#{batchcode},</if>
            <if test="remark != null">REMARK=#{remark},</if>
        </set>
        WHERE GUID = #{guid}
    </update>

    <!-- 单选删除语句 -->
    <delete id="delete" parameterType="Fileralation" flushCache="true">
        DELETE FROM fileralation WHERE GUID = #{guid}
    </delete>

    <!-- 多选删除 -->
    <delete id="mulDel" parameterType="java.lang.String" flushCache="true">
        DELETE FROM fileralation WHERE GUID IN
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>
